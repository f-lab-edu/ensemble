(()=>{"use strict";var e,t={587:(e,t,n)=>{var a=n(893);const r=async()=>{const e=await(0,a.X3)("firebaseLocalStorageDb",1);return await e.get("firebaseLocalStorage","firebase:authUser:AIzaSyAhXikJbMNO2HCGrdYbs0vKLR_KP8BS67M:[DEFAULT]")},o={"auth/invalid-email":"이메일 형식이 올바르지 않습니다.","auth/weak-password":"비밀번호를 6자리 이상으로 입력해주세요.","auth/internal-error":"비밀번호를 입력 해 주세요","auth/email-already-in-use":"이미 등록된 이메일입니다.","auth/wrong-password":"이메일또는 비밀번호를 잘못입력하셨습니다.","auth/user-not-found":"이메일또는 비밀번호를 잘못입력하셨습니다."},i="f-lab-edu.github.io"===window.location.host,s=(e,t,n)=>{const a=document.createElement(e);return t&&(a.innerHTML=t),n&&(a.className=n),a},c=(e,t)=>t?`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${(e.getDate()+t).toString().padStart(2,"0")}`:`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`,d=(e,t)=>{if(i)return window.history.pushState(null,null,`/ensemble${e}`),void t(e);window.history.pushState(null,null,e),t(e)};var l=n(844),p=n(692),u=n(952);const h=(0,l.ZF)({apiKey:"AIzaSyAhXikJbMNO2HCGrdYbs0vKLR_KP8BS67M",authDomain:"ensemble-4ba6f.firebaseapp.com",projectId:"ensemble-4ba6f",storageBucket:"ensemble-4ba6f.appspot.com",messagingSenderId:"264379873721",appId:"1:264379873721:web:1d88ec51964e5e23869e68"}),v=(0,u.ad)(h),m=(0,p.v0)(h),w=(0,u.hJ)(v,"post"),f=async e=>await(0,u.QT)((0,u.JU)(v,"post",e)),b=(e,t)=>{e.preventDefault(),(async()=>{await(0,p.w7)(m)})();const n=e.target.getAttribute("href");d(n,t)},g=async e=>{const t=s("header"),n=s("div",'<a href="/" class="title" data-link>ensemble</a>'),a=s("nav","","navigation");if(await r()){a.innerHTML='\n      <a href="/users" data-link>마이페이지</a>\n      <a href="/" id="logout-button">로그아웃</a>\n    ';return a.querySelector("#logout-button").addEventListener("click",(t=>{b(t,e)})),t.append(n,a),t}return a.innerHTML='\n    <a href="/login" data-link>로그인</a>\n    <a href="/signup" data-link>회원가입</a>\n  ',t.append(n,a),t},y=e=>{const t=s("div"),n=s("section","","community-header");r().then((e=>{n.innerHTML=e?'\n          <p>함께 성장할 스터디를 모집해보세요</p>\n          <a href="/post/write" data-link>글쓰기</a>\n        ':"\n          <p>함께 성장할 스터디를 모집해보세요</p>\n        "})).catch((e=>{n.innerHTML=`<p>${e}</p>`}));const a=s("section","","post-list"),o=s("ul");return(async()=>await(0,u.PL)(w))().then((r=>{r.forEach((t=>{const{title:n,contents:a}=t.data(),r=s("li",`\n            <a href="/post/view/${t.id}">\n              <div class="post-title">${n}</div>\n              <div class="post-body">${a}</div>\n            </a>\n          `,"post-container");r.querySelector("a").addEventListener("click",(t=>{((e,t)=>{e.preventDefault();const n=e.currentTarget.getAttribute("href");window.location.pathname!==n&&d(n,t)})(t,e)})),o.append(r)})),a.append(o),t.append(n,a)})).catch((e=>{t.append(document.createTextNode(e))})),t},S=(e,t)=>{e.preventDefault();const n=document.querySelector(".post-title-input"),a=document.querySelector(".post-date-input"),o=document.querySelector(".post-contents-input"),i=document.querySelector(".error-message"),s=n.value,c=o.value,l=a.value;if(!s)return void(i.innerHTML="제목을 입력해주세요.");if(!c)return void(i.innerHTML="본문 내용을 작성해주세요.");r().then((e=>{(async(e,t,n,a,r)=>{await(0,u.ET)(w,{title:e,contents:t,writer:a,uid:r,hits:0,tags:["서울","javascript"],contentDate:u.EK.fromDate(new Date),deadline:u.EK.fromDate(new Date(n))})})(s,c,l,e.value.email,e.value.uid)}));const p=e.target.getAttribute("href");window.location.pathname!==p&&d(p,t)},L=e=>{const t=new Date,n=s("div"),a=s("div",'<input type="text" class="post-title-input" placeholder="제목을 입력해주세요."/>'),r=s("div",`\n      마감일: <input \n        type="date"\n        class="post-date-input"\n        value="${c(t)}"\n        min="${c(t,1)}"\n      />\n    `),o=s("div",'<textarea class="post-contents-input" />'),i=s("div","","error-message"),d=s("div",'\n      <a href="/" id="post-register-button">등록</a>\n      <a href="/" class="post-cancel-button" data-link>취소</a>\n    ',"post-button");return d.querySelector("#post-register-button").addEventListener("click",(t=>{S(t,e)})),n.append(a,r,o,i,d),n},D=(e,t,n)=>{e.preventDefault(),(async e=>await(0,u.oe)((0,u.JU)(v,"post",e)))(n).then((()=>{const n=e.target.getAttribute("href");window.location.pathname!==n&&d(n,t)}))},k=e=>{const t=s("div"),n=window.location.pathname.split("/").slice(-1)[0];if(!n)throw new Error("유효하지 않은 URL입니다.");return f(n).then((async a=>{if(!a.data())throw new Error("존재하지 않는 게시글입니다.");const{title:o,contents:i,writer:c,contentDate:l,uid:p}=a.data(),u=s("div","","post-view-header"),h=s("h1",`${o}`,"post-view-title"),v=s("div",` \n          <div>${c}</div>\n          <div>작성일 ${m=l.toDate(),new Date(m.getTime()+324e5).toISOString().replace("T"," ").slice(0,-5)}<div>\n        `,"post-view-title");var m;u.append(h,v);const w=s("div",`\n          <hr />\n          <div>${i}</div>\n        `,"post-view-contents"),f=s("div","","post-button"),b=await r();if(b&&b.value.uid===p){f.innerHTML=`\n          <a href="/" id="post-delete-button">삭제</a>\n          <a href="/post/edit/${n}" id="post-edit-button">수정</a>\n        `;f.querySelector("#post-delete-button").addEventListener("click",(t=>D(t,e,n)));f.querySelector("#post-edit-button").addEventListener("click",(t=>((e,t)=>{e.preventDefault();const n=e.target.getAttribute("href");window.location.pathname!==n&&d(n,t)})(t,e)))}t.append(u,w,f)})).catch((e=>{t.append(document.createTextNode(e))})),t},E=(e,t,n)=>{e.preventDefault();const a=document.querySelector(".post-title-input"),r=document.querySelector(".post-date-input"),o=document.querySelector(".post-contents-input"),i=document.querySelector(".error-message"),s=a.value,c=o.value,l=r.value;s?c?(async(e,t,n,a)=>{const r=(0,u.JU)(v,"post",e);return await(0,u.r7)(r,{title:t,contents:n,deadline:u.EK.fromDate(new Date(a))})})(n,s,c,l).then((()=>{const n=e.target.getAttribute("href");window.location.pathname!==n&&d(n,t)})):i.innerHTML="본문 내용을 작성해주세요.":i.innerHTML="제목을 입력해주세요."},T=e=>{const t=window.location.pathname.split("/").slice(-1)[0];if(!t)throw new Error("유효하지 않은 URL입니다.");const n=new Date,a=s("div");return f(t).then((async o=>{if(!o.data())throw new Error("존재하지 않는 게시글입니다.");const i=await r(),{title:l,contents:p,deadline:u,uid:h}=o.data();if(i.value.uid!==h)throw new Error("접근권한이 없습니다.");const v=s("div",`\n          <input \n            type="text" \n            class="post-title-input" \n            placeholder="제목을 입력해주세요."\n            value="${l}"\n          />\n        `),m=s("div",`\n          마감일: <input \n            type="date"\n            class="post-date-input"\n            value="${c(u.toDate())}"\n            min="${c(n,1)}"\n          />\n        `),w=s("div",`<textarea class="post-contents-input">${p}</textarea>`),f=s("div","","error-message"),b=s("div",`\n          <a href="/post/view/${t}" class="post-cancel-button" id="post-edit-cancel">취소</a>\n          <a href="/post/view/${t}" id="post-edit-button">수정</a>\n        `,"post-button");b.querySelector("#post-edit-button").addEventListener("click",(n=>E(n,e,t)));b.querySelector("#post-edit-cancel").addEventListener("click",(t=>((e,t)=>{e.preventDefault();const n=e.target.getAttribute("href");window.location.pathname!==n&&d(n,t)})(t,e))),a.append(v,m,w,f,b)})).catch((e=>{a.append(document.createTextNode(e))})),a},q=e=>{const t=document.createElement("p");return t.innerHTML="\n    <h1>Not Found</h1>\n  ",e&&t.append(document.createTextNode(e)),t},$=(e,t)=>{e.preventDefault();const n=document.querySelector("#email"),a=document.querySelector("#password"),r=document.querySelector("#password-confirm"),i=document.querySelector(".error-message"),s=n.value,c=a.value;c===r.value?(async(e,t)=>await(0,p.Xb)(m,e,t))(s,c).then((()=>{const n=e.target.getAttribute("href");window.location.pathname!==n&&d(n,t)})).catch((e=>{i.innerHTML=o[e.code]})):i.innerHTML="비밀번호가 서로 일치하지 않습니다"},M=e=>{const t=s("form","","user-form"),n=s("h1","회원가입","user-title"),a=s("div",'\n      <label for="email">이메일</label>\n      <input type="email" id="email" placeholder="example@abc.com"/>\n    ',"user-form-input"),r=s("div",'\n      <label for="password">비밀번호</label>\n      <input type="password" id="password" />\n    ',"user-form-input"),o=s("div",'\n      <label for="password-confirm">비밀번호 확인</label>\n      <input type="password" id="password-confirm" />\n    ',"user-form-input"),i=s("div","","error-message"),c=s("div",'\n      <button type="submit">\n        <a href="/" id="signup-button">가입하기</a>\n      </button>\n    ',"user-form-button");return c.querySelector("#signup-button").addEventListener("click",(t=>{$(t,e)})),t.append(n,a,r,o,i,c),t},H=(e,t)=>{e.preventDefault();const n=document.querySelector("#email"),a=document.querySelector("#password"),r=document.querySelector(".error-message");(async(e,t)=>await(0,p.e5)(m,e,t))(n.value,a.value).then((()=>{const n=e.target.getAttribute("href");window.location.pathname!==n&&d(n,t)})).catch((e=>{r.innerHTML=o[e.code]}))},A=e=>{const t=s("form","","user-form"),n=s("h1","로그인","user-title"),a=s("div",'\n      <label for="email">이메일</label>\n      <input type="email" id="email" />\n    ',"user-form-input"),r=s("div",'\n      <label for="password">비밀번호</label>\n      <input type="password" id="password" />\n    ',"user-form-input"),o=s("div","","error-message"),i=s("div",'\n      <button type="submit">\n        <a href="/" id="login-button">로그인</a>\n      </button>\n    ',"user-form-button");return i.querySelector("#login-button").addEventListener("click",(t=>{H(t,e)})),t.append(n,a,r,o,i),t},O=document.querySelector("#app"),x=[{path:"/",component:y},{path:"/login",component:A},{path:"/signup",component:M},{path:"/post/view",component:k},{path:"/post/write",component:L},{path:"/post/edit",component:T}],j=async e=>{const t=/\/\w{20}/g,n=e??window.location.pathname.replace("/ensemble","");try{const e=await g(j),a=s("main"),r=n.split("/").length-1>1?x.find((e=>e.path===n.replace(t,"")))?.component||q:x.find((e=>e.path===n))?.component||q;a.append(r(j)),O.replaceChildren(e,a)}catch(e){O.replaceChildren(q(e))}};O.addEventListener("click",(e=>{if(!e.target.matches("[data-link]"))return;e.preventDefault();const t=e.target.getAttribute("href");window.location.pathname!==t&&d(t,j)})),window.addEventListener("popstate",(()=>j())),window.addEventListener("DOMContentLoaded",(()=>j()))}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,n,r,o)=>{if(!n){var i=1/0;for(l=0;l<e.length;l++){for(var[n,r,o]=e[l],s=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(s=!1,o<i&&(i=o));if(s){e.splice(l--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,r,o]},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,s,c]=n,d=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var l=c(a)}for(t&&t(n);d<i.length;d++)o=i[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(l)},n=self.webpackChunkensemble=self.webpackChunkensemble||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[216],(()=>a(587)));r=a.O(r)})();