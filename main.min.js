(()=>{"use strict";var e,t={760:(e,t,n)=>{const a={"auth/invalid-email":"이메일 형식이 올바르지 않습니다.","auth/weak-password":"비밀번호를 6자리 이상으로 입력해주세요.","auth/internal-error":"비밀번호를 입력 해 주세요","auth/email-already-in-use":"이미 등록된 이메일입니다.","auth/wrong-password":"이메일또는 비밀번호를 잘못입력하셨습니다.","auth/user-not-found":"이메일또는 비밀번호를 잘못입력하셨습니다."},r=new Date,i="f-lab-edu.github.io"===window.location.host,o=(e,t,n)=>r>e||(t===n||t>n),s=(e,t,n)=>{const a=document.createElement(e);return t&&(a.innerHTML=t),n&&(a.className=n),a},c=(e,t)=>t?`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${(e.getDate()+t).toString().padStart(2,"0")}`:`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`,l=e=>new Date(e.getTime()+324e5).toISOString().replace("T"," ").slice(0,-5),d=(e,t)=>{if(i)return window.history.pushState(null,null,`/ensemble${e}`),void t(e);window.history.pushState(null,null,e),t(e)};var p=n(844),u=n(692),v=n(952);const m=(0,p.ZF)({apiKey:"AIzaSyAhXikJbMNO2HCGrdYbs0vKLR_KP8BS67M",authDomain:"ensemble-4ba6f.firebaseapp.com",projectId:"ensemble-4ba6f",storageBucket:"ensemble-4ba6f.appspot.com",messagingSenderId:"264379873721",appId:"1:264379873721:web:1d88ec51964e5e23869e68"}),f=(0,v.ad)(m),b=(0,u.v0)(m),h=(0,v.hJ)(f,"post"),w=async e=>await(0,v.QT)((0,v.JU)(f,"post",e)),g=(e,t)=>{e.preventDefault(),(async()=>{await(0,u.w7)(b)})();const n=e.target.getAttribute("href");d(n,t)},y=e=>{const t=s("div",'<a href="/" id="logout-button">로그아웃</a>',"profile-modal");return t.querySelector("#logout-button").addEventListener("click",(t=>{g(t,e)})),t};var S=n(893);const L=async()=>{const e=await(0,S.X3)("firebaseLocalStorageDb",1);return await e.get("firebaseLocalStorage","firebase:authUser:AIzaSyAhXikJbMNO2HCGrdYbs0vKLR_KP8BS67M:[DEFAULT]")},D=e=>{e.currentTarget.querySelector(".profile-modal").classList.add("active")},q=e=>{e.currentTarget.querySelector(".profile-modal").classList.remove("active")},E=async e=>{const t=s("header"),n=s("div",'<a href="/" class="title" data-link>Ensemble</a>'),a=s("nav","","navigation");if(await L()){a.innerHTML='\n      <div class="navigation-container">\n        <a href="/users" data-link class="user-profile"><?xml version="1.0" ?><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><title/><g id="about"><path d="M16,16A7,7,0,1,0,9,9,7,7,0,0,0,16,16ZM16,4a5,5,0,1,1-5,5A5,5,0,0,1,16,4Z"/><path d="M17,18H15A11,11,0,0,0,4,29a1,1,0,0,0,1,1H27a1,1,0,0,0,1-1A11,11,0,0,0,17,18ZM6.06,28A9,9,0,0,1,15,20h2a9,9,0,0,1,8.94,8Z"/></g></svg>\n</a>\n      </div>\n    ';return a.querySelector(".navigation-container").append(y(e)),a.addEventListener("mouseover",D),a.addEventListener("mouseout",q),t.append(n,a),t}return a.innerHTML='\n    <a href="/login" data-link>로그인</a>\n    <a href="/signup" data-link>회원가입</a>\n  ',t.append(n,a),t},k=e=>{const t=s("div","","recruitement-status");return e?(t.innerHTML="모집완료",t.classList.add("gray-status"),t):(t.innerHTML="모집중",t.classList.add("green-status"),t)},T=(e,t)=>{const{title:n,contents:a,deadline:r,applicant:i,recruitment:c}=e.data(),l=o(r.toDate(),i,c),p=s("li",` \n      <a href="/post/view/${e.id}">\n        <div class="post-title">${n}</div>\n        <div class="post-body">${a}</div>\n      </a>\n    `,"post-container"),u=p.querySelector("a");return u.addEventListener("click",(e=>{((e,t)=>{e.preventDefault();const n=e.currentTarget.getAttribute("href");d(n,t)})(e,t)})),u.prepend(k(l)),p},$=async e=>{const t=s("div"),n=s("section","","post-list"),a=s("ul"),r=await(async()=>await(0,v.PL)((0,v.IO)(h,(0,v.Xo)("contentDate","desc"))))();if(!r)throw new Error("게시글을 찾을 수 없습니다.");r.forEach((t=>{a.append(T(t,e))})),n.append(a);const i=s("section","","community-header");return await L()?(i.innerHTML='\n      <p>함께 성장할 스터디를 모집해보세요</p>\n      <a href="/post/write" data-link>글쓰기</a>\n    ',t.append(i,n),t):(i.innerHTML="\n    <p>함께 성장할 스터디를 모집해보세요</p>\n  ",t.append(i,n),t)},M=(e,t)=>{e.preventDefault();const n=document.querySelector(".post-title-input"),a=document.querySelector(".post-date-input"),r=document.querySelector(".post-recruitment-input"),i=document.querySelector(".post-contents-input"),o=document.querySelector(".error-message"),s=n.value,c=i.value,l=a.value,p=r.value||1;if(!s)return void(o.innerHTML="제목을 입력해주세요.");if(!c)return void(o.innerHTML="본문 내용을 작성해주세요.");L().then((e=>{(async(e,t,n,a,r,i)=>{await(0,v.ET)(h,{title:e,contents:t,writer:r,uid:i,hits:0,applicant:0,recruitment:parseInt(a,10),applicants:[],tags:["서울","javascript"],contentDate:v.EK.fromDate(new Date),deadline:v.EK.fromDate(new Date(n))})})(s,c,l,p,e.value.email,e.value.uid)}));const u=e.target.getAttribute("href");d(u,t)},A=e=>{const t=new Date,n=s("div"),a=s("div",'<input type="text" class="post-title-input" placeholder="제목을 입력해주세요."/>'),r=s("div",`\n      마감일: <input \n        type="date"\n        class="post-date-input"\n        value="${c(t)}"\n        min="${c(t,1)}"\n      />\n    `),i=s("div",'모집 인원: <input type="number" class="post-recruitment-input" min="1" value="1" />'),o=s("div",'<textarea class="post-contents-input" />'),l=s("div","","error-message"),d=s("div",'\n      <a href="/" class="green-btn" id="post-register-button">등록</a>\n      <a href="/" class="post-cancel-button" data-link>취소</a>\n    ',"post-button");return d.querySelector("#post-register-button").addEventListener("click",(t=>{M(t,e)})),n.append(a,r,i,o,l,d),n},H=(e,t,n)=>{e.preventDefault(),(async e=>await(0,v.oe)((0,v.JU)(f,"post",e)))(n).then((()=>{const n=e.target.getAttribute("href");d(n,t)}))},O=(e,t)=>{const n=s("div",' \n      <div class="dimmed"></div>\n      <div class="modal-container">\n        <div class="modal-title">글 삭제</div>\n        <div class="modal-content">해당 글을 삭제하시겠습니까?</div>\n        <div class="modal-bottom">\n          <a id="modal-cancel">취소</a>\n          <a href="/" class="green-btn" id="modal-confirm">확인</a>\n        </div>\n      </div>\n    ',"modal");n.querySelector("#modal-cancel").addEventListener("click",(e=>(e=>{e.preventDefault();const t=document.querySelector("#app"),n=document.querySelector(".modal");t.removeChild(n)})(e)));return n.querySelector("#modal-confirm").addEventListener("click",(n=>H(n,e,t))),n},x=(e,t,n,a,r)=>{e.preventDefault(),(async(e,t,n)=>{const a=(0,v.JU)(f,"post",e);return await(0,v.r7)(a,{applicants:[...t,{email:n,status:"pending"}]})})(n,a,r).then((()=>{t()}))},C=(e,t,n,a,r)=>{e.preventDefault(),(async(e,t,n)=>{const a=(0,v.JU)(f,"post",e);return await(0,v.r7)(a,{applicants:t.filter((e=>e.email!==n))})})(n,a,r).then((()=>{t()}))},j=(e,t,n,a,r,i)=>{const o=s("div","","post-button"),c=((e,t)=>e.some((e=>e.email===t)))(r,t.value.email);if(t.value.uid===n){o.innerHTML=`\n      <a href="/" class="red-btn" id="post-delete-button">삭제</a>\n      <a href="/post/edit/${a}" class="green-btn" id="post-edit-button">수정</a>\n    `;o.querySelector("#post-delete-button").addEventListener("click",(t=>((e,t,n)=>{e.preventDefault(),document.querySelector("#app").append(O(t,n))})(t,e,a)));o.querySelector("#post-edit-button").addEventListener("click",(t=>((e,t)=>{e.preventDefault();const n=e.target.getAttribute("href");d(n,t)})(t,e)))}else if(i||c){if(!i&&c){o.innerHTML='\n      <a class="blue-btn" id="post-apply-cancel">신청 대기중</a>\n    ';o.querySelector("#post-apply-cancel").addEventListener("click",(n=>C(n,e,a,r,t.value.email)))}}else{o.innerHTML='\n      <a class="green-btn" id="post-apply-button">신청</a>\n    ';o.querySelector("#post-apply-button").addEventListener("click",(n=>x(n,e,a,r,t.value.email)))}return o},J=(e,t,n,a,r)=>{e.preventDefault();const i=e.currentTarget.parentNode;(async(e,t)=>{const n=(0,v.JU)(f,"post",e),{applicant:a,applicants:r}=(await(0,v.QT)(n)).data(),i=r.map((e=>e.email===t?Object.assign(e,{status:"accept"}):e));return await(0,v.r7)(n,{applicant:a+1,applicants:i})})(n,a).then((()=>{i.replaceChildren(r.accept(t,n,a));const e=s("div",`${a}`);i.prepend(e),t()}))},U=(e,t,n,a,r)=>{e.preventDefault();const i=e.currentTarget.parentNode;(async(e,t)=>{const n=(0,v.JU)(f,"post",e),{applicant:a,applicants:r}=(await(0,v.QT)(n)).data(),i=r.map((e=>e.email===t?Object.assign(e,{status:"pending"}):e));return await(0,v.r7)(n,{applicant:a-1,applicants:i})})(n,a).then((()=>{i.replaceChildren(r.pending(t,n,a));const e=s("div",`${a}`);i.prepend(e),t()}))},I={pending:(e,t,n)=>{const a=s("a","수락","green-btn");return a.addEventListener("click",(a=>J(a,e,t,n,I))),a},accept:(e,t,n)=>{const a=s("a","취소","red-btn");return a.addEventListener("click",(a=>U(a,e,t,n,I))),a}},K=(e,t,n)=>{const a=s("div",'\n      <div class="dimmed"></div>\n      <div class="applicants-container">\n        <div class="modal-title">신청자 리스트</div>\n        <div class="modal-content"></div>\n        <div class="modal-bottom">\n            <a id="modal-cancel">닫기</a>\n        </div>\n      </div>\n    ',"modal");a.querySelector("#modal-cancel").addEventListener("click",(e=>(e=>{e.preventDefault();const t=document.querySelector(".modal");document.body.removeChild(t)})(e)));const r=a.querySelector(".modal-content");return n.forEach((n=>{const a=s("div",`<div>${n.email}</div>`,"applicant");a.append(I[n.status](e,t,n.email)),r.append(a)})),a},F=async e=>{const t=s("div","","post-view"),n=window.location.pathname.split("/").slice(-1)[0],a=await w(n);if(!a.data())throw new Error("존재하지 않는 게시글입니다.");const{title:r,contents:i,writer:c,contentDate:d,deadline:p,applicant:u,recruitment:v,applicants:m,uid:f}=a.data(),b=o(p.toDate(),u,v),h=s("div","","post-view-header"),g=s("h1",`${r}`,"post-view-title"),y=s("div",` \n      <div>${c}</div>\n      <div>작성일 ${l(d.toDate())}<div>\n      <div>마감일 ${l(p.toDate())}<div>\n      <div>모집 현황 ${u}/${v}</div>\n    `,"post-view-sub-title");y.append(k(b));const S=await L();if(S&&S.value.uid===f){const t=s("div",'<a id="applicants-view-button" class="blue-btn">신청 리스트</a>',"applications-button");t.querySelector("#applicants-view-button").addEventListener("click",(t=>((e,t,n,a)=>{e.preventDefault(),document.body.append(K(t,n,a))})(t,e,n,m))),y.append(t)}h.append(g,y);const D=s("div",`\n      <hr />\n      <div>${i}</div>\n    `,"post-view-contents");if(S){const a=j(e,S,f,n,m,b);return t.append(h,D,a),t}return t.append(h,D),t},N=(e,t,n)=>{e.preventDefault();const a=document.querySelector(".post-title-input"),r=document.querySelector(".post-date-input"),i=document.querySelector(".post-contents-input"),o=document.querySelector(".post-recruitment-input"),s=document.querySelector(".error-message"),c=a.value,l=i.value,p=r.value,u=o.value||1;c?l?(async(e,t,n,a,r)=>{const i=(0,v.JU)(f,"post",e);return await(0,v.r7)(i,{title:t,contents:n,recruitment:parseInt(r,10),deadline:v.EK.fromDate(new Date(a))})})(n,c,l,p,u).then((()=>{const n=e.target.getAttribute("href");d(n,t)})):s.innerHTML="본문 내용을 작성해주세요.":s.innerHTML="제목을 입력해주세요."},P=async e=>{const t=s("div"),n=window.location.pathname.split("/").slice(-1)[0],a=new Date,r=await w(n);if(!r.data())throw new Error("존재하지 않는 게시글입니다.");const i=await L(),{title:o,contents:l,deadline:p,recruitment:u,uid:v}=r.data();if(i.value.uid!==v)throw new Error("접근권한이 없습니다.");const m=s("div",`\n      <input \n        type="text" \n        class="post-title-input" \n        placeholder="제목을 입력해주세요."\n        value="${o}"\n      />\n    `),f=s("div",`\n      마감일: <input \n        type="date"\n        class="post-date-input"\n        value="${c(p.toDate())}"\n        min="${c(a,1)}"\n      />\n    `),b=s("div",`모집 인원: <input type="number" class="post-recruitment-input" min="1" value=${u} />`),h=s("div",`<textarea class="post-contents-input">${l}</textarea>`),g=s("div","","error-message"),y=s("div",`\n      <a href="/post/view/${n}" class="post-cancel-button" id="post-edit-cancel">취소</a>\n      <a href="/post/view/${n}" class="green-btn" id="post-edit-button">수정</a>\n    `,"post-button");y.querySelector("#post-edit-button").addEventListener("click",(t=>N(t,e,n)));return y.querySelector("#post-edit-cancel").addEventListener("click",(t=>((e,t)=>{e.preventDefault();const n=e.target.getAttribute("href");d(n,t)})(t,e))),t.append(m,f,b,h,g,y),t},X=(e,t)=>{const n=s("div",`\n      <h1>Not Found</h1>\n      <div>${t??""}</div>      \n      <div class="not-found-button">\n        <a href="/" class="green-btn" id="home-button">홈으로</a>\n      </div>\n    `,"not-found-container");return n.querySelector("#home-button").addEventListener("click",(t=>{((e,t)=>{e.preventDefault();const n=e.target.getAttribute("href");d(n,t)})(t,e)})),n},Z=(e,t)=>{e.preventDefault();const n=document.querySelector("#email"),r=document.querySelector("#password"),i=document.querySelector("#password-confirm"),o=document.querySelector(".error-message"),s=n.value,c=r.value;c===i.value?(async(e,t)=>await(0,u.Xb)(b,e,t))(s,c).then((()=>{const n=e.target.getAttribute("href");d(n,t)})).catch((e=>{o.innerHTML=a[e.code]})):o.innerHTML="비밀번호가 서로 일치하지 않습니다"},B=e=>{const t=s("form","","user-form"),n=s("h1","회원가입","user-title"),a=s("div",'\n      <label for="email">이메일</label>\n      <input type="email" id="email" placeholder="example@abc.com"/>\n    ',"user-form-input"),r=s("div",'\n      <label for="password">비밀번호</label>\n      <input type="password" id="password" />\n    ',"user-form-input"),i=s("div",'\n      <label for="password-confirm">비밀번호 확인</label>\n      <input type="password" id="password-confirm" />\n    ',"user-form-input"),o=s("div","","error-message"),c=s("div",'\n      <button type="submit">\n        <a href="/" id="signup-button">가입하기</a>\n      </button>\n    ',"user-form-button");return c.querySelector("#signup-button").addEventListener("click",(t=>{Z(t,e)})),t.append(n,a,r,i,o,c),t},Y=(e,t)=>{e.preventDefault();const n=document.querySelector("#email"),r=document.querySelector("#password"),i=document.querySelector(".error-message");(async(e,t)=>await(0,u.e5)(b,e,t))(n.value,r.value).then((()=>{const n=e.target.getAttribute("href");d(n,t)})).catch((e=>{i.innerHTML=a[e.code]}))},Q=e=>{const t=s("form","","user-form"),n=s("h1","로그인","user-title"),a=s("div",'\n      <label for="email">이메일</label>\n      <input type="email" id="email" />\n    ',"user-form-input"),r=s("div",'\n      <label for="password">비밀번호</label>\n      <input type="password" id="password" />\n    ',"user-form-input"),i=s("div","","error-message"),o=s("div",'\n      <button type="submit">\n        <a href="/" id="login-button">로그인</a>\n      </button>\n    ',"user-form-button");return o.querySelector("#login-button").addEventListener("click",(t=>{Y(t,e)})),t.append(n,a,r,i,o),t},R=document.querySelector("#app"),z=/\/\w{20}/g,G=[{path:"/",component:$},{path:"/login",component:Q},{path:"/signup",component:B},{path:"/post/view",component:F},{path:"/post/write",component:A},{path:"/post/edit",component:P}],_=async e=>{const t=e??window.location.pathname.replace("/ensemble","");try{const e=await E(_),n=s("main"),a=G.find((e=>e.path===t.replace(z,"")))?.component;if(!a)throw Error("유효하지 않은 URL입니다");n.append(await a(_)),R.replaceChildren(e,n)}catch(e){R.replaceChildren(X(_,e))}};R.addEventListener("click",(e=>{if(!e.target.matches("[data-link]"))return;e.preventDefault();const t=e.target.getAttribute("href");window.location.pathname!==t&&d(t,_)})),window.addEventListener("popstate",(()=>_())),window.addEventListener("DOMContentLoaded",(()=>_()))}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,n,r,i)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,r,i]=e[d],s=!0,c=0;c<n.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(s=!1,i<o&&(o=i));if(s){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,r,i]},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[o,s,c]=n,l=0;if(o.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var d=c(a)}for(t&&t(n);l<o.length;l++)i=o[l],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self.webpackChunkensemble=self.webpackChunkensemble||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[216],(()=>a(760)));r=a.O(r)})();